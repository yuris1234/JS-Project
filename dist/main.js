!function(){"use strict";var t,e,s,i;t=class{constructor(t,e){this.canvas=t,this.pos=t.width/2,this.velocity=0,this.keys={right:{pressed:!1},left:{pressed:!1}},this.ctx=e;let s=this.handleArrowKeyDown.bind(this),i=this.handleArrowKeyUp.bind(this);document.addEventListener("keydown",(t=>{s(t)})),document.addEventListener("keyup",(t=>{i(t)}))}draw(){let t=new Image;t.src="src/media/book.png",t.onload=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(t,this.pos,this.canvas.height-75,75,75)}}update(){this.draw(),this.velocity=0,this.keys.right.pressed&&this.pos<=this.canvas.width-100?this.velocity=3:this.keys.left.pressed&&this.pos>=0&&(this.velocity=-3),this.pos+=this.velocity}handleArrowKeyDown(t){switch(t.key){case"ArrowRight":this.keys.right.pressed=!0;break;case"ArrowLeft":this.keys.left.pressed=!0}}handleArrowKeyUp(t){switch(t.key){case"ArrowRight":this.keys.right.pressed=!1;break;case"ArrowLeft":this.keys.left.pressed=!1}}},e=class{constructor(t,e,s){this.velocity=this.getRandomArbitrary(1,3),this.pos={x:this.getRandomArbitrary(10,t.width-10),y:0},this.audioCtx=s,this.ctx=e,this.canvas=t,this.appear=!0,this.collision=!1,this.alpha=this.getRandomAlpha(),this.createGain(),this.sound=this.createAudio()}createGain(){const t=document.querySelector("input[name='volume']");this.gainNode=this.audioCtx.createGain(),this.gainNode.connect(this.audioCtx.destination),this.gainNode.gain.value=t.value,t.addEventListener("change",(e=>{this.gainNode.gain.value=t.value}),!1)}updateGain(){const t=document.querySelector("input[name='volume']");this.gainNode.gain.value=t.value}createAudio(){const t=new Audio;switch(t.crossOrigin="anonymous",this.alpha){case"A":t.src="src/media/a.mp3";break;case"B":t.src="src/media/b.mp3";break;case"C":t.src="src/media/c.mp3";break;case"D":t.src="src/media/d.mp3";break;case"E":t.src="src/media/e.mp3";break;case"F":t.src="src/media/f.mp3";break;case"G":t.src="src/media/g.mp3"}return this.audioCtx.createMediaElementSource(t).connect(this.gainNode),t}draw(){let t=new Image;t.src="src/media/music_note.png",t.onload=()=>{this.ctx.fillStyle="black",this.ctx.font="20px serif",this.ctx.drawImage(t,this.pos.x,this.pos.y,50,50),this.ctx.fillText(this.alpha,this.pos.x+20,this.pos.y)}}update(){this.checkOutOfBounds(),this.appear&&(this.draw(),this.pos.y+=this.velocity)}checkOutOfBounds(){this.pos.y>=this.canvas.height-50&&(this.appear=!1)}checkCollision(t){return this.pos.x<=t.pos+37.5&&this.pos.y>=this.canvas.height-75&&this.pos.x>=t.pos-37.5&&(this.collision=!0,this.appear=!1),this.collision}playTone(){this.updateGain(),this.sound.play()}getRandomArbitrary(t,e){return Math.random()*(e-t)+t}getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t)}getRandomAlpha(){return["A","B","C","D","E","F","G"][this.getRandomInt(0,7)]}},s=class{constructor(t,e){this.canvas=t,this.ctx=e,this.sequence=[]}draw(){let t=new Image;t.src="src/media/music_note.png",t.onload=()=>{this.sequence.forEach((e=>{this.ctx.fillStyle="black",this.ctx.font="20px serif",this.ctx.drawImage(t,this.pos,10,50,50),this.ctx.fillText(e.alpha,this.pos+10,20),this.pos+=this.canvas.width/10}))}}update(t){this.sequence.push(t),this.pos=10,this.draw()}play(){let t=1;this.sequence.forEach((e=>{setTimeout((()=>{e.playTone()}),500*t++)}))}reset(){this.sequence=[],this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},i=class{constructor(e,i,a,n,h){this.bucket=new t(e,i),this.collectedNotes=[],this.ctx=i,this.audioCtx=a,this.canvas=e,this.sequence=new s(n,h),this.newNotes(),this.animate()}run(){this.newNotes(),this.sequence.reset(),this.animate()}newNotes(){this.notes=[];for(let t=0;t<10;t++){let t=new e(this.canvas,this.ctx,this.audioCtx);this.notes.push(t)}}animate(){if(this.sequence.sequence.length<10){this.bucket.update();let t=[];for(this.notes.forEach((e=>{e.checkCollision(this.bucket)&&(e.playTone(),this.sequence.update(e)),e.appear&&t.push(e),e.update()})),this.notes=t;this.notes.length<10;){let t=new e(this.canvas,this.ctx,this.audioCtx);this.notes.push(t)}let s=this.animate.bind(this);this.requestId=window.requestAnimationFrame(s)}else this.sequence.play()}},document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("game-canvas"),e=t.getContext("2d");t.width=window.innerWidth-window.innerWidth/2.5,t.height=window.innerHeight-window.innerHeight/4;const s=document.getElementById("sequence-canvas"),a=s.getContext("2d");s.width=window.innerWidth/2-100,s.height=window.innerHeight/12,t.addEventListener("click",(()=>{let n=new AudioContext;new i(t,e,n,s,a).run()})),document.addEventListener("keydown",(n=>{if(" "===n.key){let n=new AudioContext;new i(t,e,n,s,a).run()}}));let n=document.querySelector("input[name='volume']"),h=n.value,c=document.querySelector(".mute"),o=document.querySelector(".unmute");c.addEventListener("click",(t=>{c.className="mute hidden",o.className="unmute",n.value=0})),o.addEventListener("click",(t=>{o.className="unmute hidden",c.className="mute",n.value=h}))}))}();
//# sourceMappingURL=main.js.map